// Generated by CoffeeScript 1.6.2
(function() {
  var bg_colors, click_delete, click_sort_btn, click_toggle_details, delete_task, details_showing, high_els, highlight_col, init_all, init_delete_btns, init_sort, init_sort_btns, init_toggle_details_btn, low_els, set_details_btn_text, sort_by, sort_by_attr, sort_column, unhighlight_col, unhighlight_task;

  bg_colors = {
    sort: 'LightSteelBlue',
    regular: 'White'
  };

  sort_column = 'priority';

  sort_by_attr = function(attr_name) {
    return 1;
  };

  high_els = function(els) {
    return els.css('background-color', bg_colors.sort);
  };

  low_els = function(els) {
    return els.css('background-color', bg_colors.regular);
  };

  highlight_col = function(attr_name) {
    high_els($(".attr." + attr_name));
    return $("#sort_" + attr_name).prop('disabled', true);
  };

  unhighlight_col = function(attr_name) {
    return low_els($(".attr." + attr_name));
  };

  unhighlight_task = function(id) {
    return low_els($("#" + id + " ." + sort_column));
  };

  sort_by = function(attr_name) {
    sort_by_attr(attr_name);
    highlight_col(attr_name);
    return sort_column = attr_name;
  };

  click_sort_btn = function(evt) {
    var attr_name;

    $('.sort_btn').prop('disabled', false);
    unhighlight_col(sort_column);
    attr_name = this.id.match(/^sort_(.*)$/)[1];
    return sort_by(attr_name);
  };

  init_sort_btns = function() {
    return $('.sort_btn').click(click_sort_btn);
  };

  init_sort = function() {
    init_sort_btns();
    bg_colors.regular = $('.attr').css('background-color');
    return highlight_col(sort_column);
  };

  delete_task = function(id) {};

  click_delete = function(evt) {
    var elem, task_id;

    if (!confirm('Delete this task?')) {
      return;
    }
    task_id = this.id.match(/^delete_(.*)$/)[1];
    elem = $("#task_" + task_id);
    elem.toggle(200, function() {
      return elem.remove();
    });
    return delete_task(task_id);
  };

  init_delete_btns = function() {
    return $('.delete_btn').click(click_delete);
  };

  details_showing = true;

  set_details_btn_text = function() {
    var verb;

    verb = details_showing ? 'Hide' : 'Show';
    return $('#toggle_details').html(verb + ' Details');
  };

  click_toggle_details = function(evt) {
    $('.task_details').toggle(200);
    details_showing = !details_showing;
    return set_details_btn_text();
  };

  init_toggle_details_btn = function() {
    $('#toggle_details').click(click_toggle_details);
    return set_details_btn_text();
  };

  init_all = function() {
    init_sort();
    init_toggle_details_btn();
    return init_delete_btns();
  };

  $(document).ready(init_all);

}).call(this);
